#!/bin/sh
. "$(dirname -- "$0")/_/husky.sh"

# í˜„ì¬ í‘¸ì‹œí•˜ë ¤ëŠ” ë¸Œëœì¹˜ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
current_branch=$(git symbolic-ref HEAD | sed -e 's,.*/\(.*\),\1,')

# ê¸ˆì§€í•  ë¸Œëœì¹˜ ë¦¬ìŠ¤íŠ¸ (main)
protected_branch='^(main)$'

# ë§Œì•½ í˜„ì¬ ë¸Œëœì¹˜ê°€ mainì´ë©´ ë§‰ì•„ë²„ë¦¬ê¸°
if [[ $current_branch =~ $protected_branch ]]; then
  echo "ğŸ›‘ [STOP] ë©”ì¸ ë¸Œëœì¹˜($current_branch)ì— ì§ì ‘ í‘¸ì‹œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
  echo "ğŸ‘‰ ì œë°œ ë¸Œëœì¹˜ë¥¼ ë”°ë¡œ ë”°ì„œ ì‘ì—…í•˜ê³  PRì„ ë‚ ë ¤ì£¼ì„¸ìš”."
  echo "   (git checkout -b feat/ìƒˆê¸°ëŠ¥)"
  exit 1
fi